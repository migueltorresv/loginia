define([],function(){return{init:function(e){const a=document.getElementById("videoInput");Promise.all([faceapi.nets.faceRecognitionNet.loadFromUri("https://ie-scj.edu.pe/entor_eval/mod/quiz/accessrule/loginia/models"),faceapi.nets.faceLandmark68Net.loadFromUri("https://ie-scj.edu.pe/entor_eval/mod/quiz/accessrule/loginia/models"),faceapi.nets.ssdMobilenetv1.loadFromUri("https://ie-scj.edu.pe/entor_eval/mod/quiz/accessrule/loginia/models"),faceapi.nets.tinyFaceDetector.loadFromUri("https://ie-scj.edu.pe/entor_eval/mod/quiz/accessrule/loginia/models")]).then(function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia({video:{}},e=>a.srcObject=e,e=>console.error(e)),console.log("video added"),async function(){const t=await function(){const a=[e];return Promise.all(a.map(async e=>{const a=[];for(let t=1;t<=4;t++){const i=await faceapi.fetchImage(`https://ie-scj.edu.pe/entor_eval/mod/quiz/accessrule/loginia/labeled_images/${e}/${t}.jpg`);let o=128,n=.5;const c=await faceapi.detectSingleFace(i,new faceapi.TinyFaceDetectorOptions({inputSize:o,scoreThreshold:n})).withFaceLandmarks().withFaceDescriptor();console.log(e+t+JSON.stringify(c)),a.push(new Float32Array(c.descriptor))}return new faceapi.LabeledFaceDescriptors(e,a)}))}();console.log(t);const i=new faceapi.FaceMatcher(t,.7);let o="",n="";a.addEventListener("play",async()=>{console.log("Playing");const e={width:a.width,height:a.height};setInterval(async()=>{const t=await faceapi.detectAllFaces(a,new faceapi.TinyFaceDetectorOptions({inputSize:128,scoreThreshold:.5})).withFaceLandmarks().withFaceDescriptors(),c=faceapi.resizeResults(t,e),s=c.map(e=>i.findBestMatch(e.descriptor));s.forEach((e,a)=>{const t=c[a].detection.box;new faceapi.draw.DrawBox(t,{label:e.toString()}),o=e._label,n=parseInt(100*e._distance)+" %"}),document.getElementById("id_loginiamessagetext").value=o,document.getElementById("id_percent").value=n},100)})}()})}}});